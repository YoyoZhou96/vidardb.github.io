webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},s,!1,function(t){a("kHQw")},null,null).exports,n=a("/ocq"),o=a("//Fk"),l=a.n(o),c=a("mtWM"),d=a.n(c),u=a("mw3O"),p=a.n(u),m=a("zL8q"),h=a.n(m),f=d.a.create({timeout:6e4,baseURL:"https://35.215.97.15/"});f.interceptors.request.use(function(t){return t},function(t){return m.Message.error({message:"Request timeout!"}),l.a.reject(t)}),f.interceptors.response.use(function(t){return t.data},function(t){if(t.response){if(306===t.response.status){var e=t.response.data+"&version=v3&callback="+encodeURIComponent(window.location.href);return void(window.location=e)}504===t.response.status||404===t.response.status?m.Message.error({message:"Server Internal Error, Please contact admin!"}):403===t.response.status?m.Message.error({message:"Perm Error, Please contact admin!"}):400===t.response.status&&console.log(t.response.data)}else m.Message.error({message:"Unknown Error!"});return l.a.resolve(t.response)});var v={post:function(t,e){return new l.a(function(a,r){return f({method:"post",baseURL:"https://35.215.97.15/",url:t,data:p.a.stringify(e)||"",withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){a(t)}).catch(function(t){console.log(t),r(t)})})},get:function(t,e,a){return void 0===a&&(a=!0),new l.a(function(r,s){return f({method:"get",url:t,params:e,withCredentials:a,headers:{"Content-Type":"application/json"}}).then(function(t){r(t)}).catch(function(t){console.log(t),s(t)})})},fileRequest:function(t,e){return new l.a(function(a,r){f({method:"post",url:t,data:p.a.stringify(e)||"",headers:{"Content-Type":"multipart/form-data"}}).then(function(t){a(t)}).catch(function(t){console.log(t),r(t)})})}};var b=a("XNC2"),g=a("spco"),k=a.n(g);b.a.register("currency",k.a);var _={name:"VidarDbDemo",data:function(){return this.theme={line:{smooth:!0}},this.extend={series:{smooth:!0}},this.grid={left:15,right:35},this.markLine={data:[{name:"average",type:"average"}]},this.markPoint={data:[{name:"max",type:"max"}]},this.vchartsLineConfig={legendName:{fare:"maximum trip fare"},legend:{y:"bottom",x:"center"},yAxisType:["$ 0,0.00"],dataType:function(t){return t+" $"}},this.chartSettings={key:"oBvDtR6nzWtVchkY4cLHtnah1VVZQKRK",bmap:{center:[120,30],zoom:14,roam:!0,mapStyle:{}}},this.chartTooltip={show:!0},{msg:"Welcome to VidarDB demo App",taskId:"",interval_id:0,biChartData:{columns:["trip_start_timestamp","fare"],rows:[]},biSqlData:[],rawTableData:[],aiTableData:[],aiSqlData:[],biSql:[],aiSql:[],disableStopBtn:!1,srcBiImg:"",srcAiImg:"",center:[39.9,116.39]}},created:function(){var t=this;this.taskId=localStorage.getItem("task_id"),this.taskId&&0===this.interval_id?(this.fetchTaskResult(this.taskId),this.interval_id=setInterval(function(){t.fetchTaskResult(t.taskId)},2e3)):this.disableStopBtn=!0},methods:{fetchTaskResult:function(t){var e,a=this;(e={task_id:t},v.get("/api/v1/task/taskId/result",e)).then(function(t){0===t.code?(a.biChartData.rows=t.data.bi,a.aiTableData=t.data.ai,a.rawTableData=t.data.raw,a.biSql=t.data.biSql,a.aiSql=t.data.aiSql,a.srcBiImg="../assets/static/max.jpg",a.srcAiImg="../assets/static/kmeans.jpg","finish"===t.data.status?(a.disableStopBtn=!0,a.$notify.success({message:"The task is finished.",duration:5e3}),clearInterval(a.interval_id),a.interval_id=0):a.disableStopBtn=!1):(a.$notify.error({title:"Error",message:t.data}),clearInterval(a.interval_id),a.interval_id=0)})},beforeDestroy:function(){clearInterval(this.interval_id),this.interval_id=0},start:function(){var t,e=this;this.interval_id>0?this.$notify.warning("There are already tasks running."):v.post("/auth/v1/task/create",t).then(function(t){0===t.code?(e.$notify.success("Create task success"),e.taskId=t.data.task_id,localStorage.setItem("task_id",e.taskId),e.fetchTaskResult(e.taskId),e.interval_id=setInterval(function(){e.fetchTaskResult(e.taskId)},2e3)):e.$notify.error({title:"Error",message:t.data})})},stop:function(){var t,e=this;(t={task_id:this.taskId},v.post("/auth/v1/task/stop",t)).then(function(t){0===t.code?(e.$notify.success("Stop task success"),clearInterval(e.interval_id),e.interval_id=0,e.disableStopBtn=!0,localStorage.removeItem("task_id")):e.$notify.error({title:"Error",message:t.data})})}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vidardb"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:14}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("Maximum Trip Fare Updated Every 100 Records")])]),t._v(" "),a("el-col",{attrs:{span:10}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("Data Flow of Taxi Trip Orders")])])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:14}},[a("div",{staticStyle:{border:"1px solid #EBEEF5"}},[a("ve-line",{attrs:{data:t.biChartData,extend:t.extend,grid:t.grid,"mark-line":t.markLine,settings:t.vchartsLineConfig,"mark-point":t.markPoint}})],1)]),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.rawTableData,"header-cell-style":{background:"#eef1f6",color:"#606266"},stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"trip_start_timestamp",label:"Trip Start Time"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taxi_id",label:"Taxi ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"row_vec",label:"Pickup Location"}}),t._v(" "),a("el-table-column",{attrs:{prop:"fare",label:"Trip Fare"}})],1)],1)],1),t._v(" "),a("br"),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:14}},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("Clustering of Pickup Location")])])],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:14}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.aiTableData,"header-cell-style":{background:"#eef1f6",color:"#606266"},stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"Trip ID","min-width":"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"row_vec",label:"Pickup Location"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cluster_id",label:"Cluster ID"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:10}},[a("el-row",[a("div",{staticStyle:{height:"272px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.biSql,"header-cell-style":{background:"#eef1f6",color:"#606266"},"highlight-current-row":"",stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"value",label:"Maximum Trip Fare","min-width":"60","max-high":"40"}},[a("el-image",{attrs:{src:t.srcBiImg}})],1)],1),t._v(" "),a("br"),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.aiSql,"header-cell-style":{background:"#eef1f6",color:"#606266"},stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"value",label:"Clustering Pickup Location","min-width":"60"}},[a("el-image",{attrs:{src:t.srcAiImg}})],1)],1)],1)]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("el-row",[a("div",{staticStyle:{align:"center","margin-top":"50px"}},[a("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary",round:""},on:{click:t.start}},[t._v("start")]),t._v(" "),a("el-button",{attrs:{type:"danger",disabled:t.disableStopBtn,round:""},on:{click:t.stop}},[t._v("stop")])],1)])],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(_,w,!1,function(t){a("X1qk")},"data-v-542b6e46",null).exports;r.default.use(n.a);var S=new n.a({routes:[{path:"/",name:"VidarDbDemo",component:y}]}),I=a("vO7p"),T=a.n(I),x=(a("Qbfk"),a("tvR6"),a("wUZ8")),D=a.n(x);r.default.config.productionTip=!1,r.default.use(h.a,{size:"small",locale:D.a}),r.default.use(T.a),r.default.prototype.$axios=d.a,new r.default({el:"#app",router:S,components:{App:i},template:"<App/>"})},Qbfk:function(t,e){},X1qk:function(t,e){},kHQw:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4f95c1a49e61d326f778.js.map